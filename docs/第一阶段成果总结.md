# ChiseLLM ç¬¬ä¸€é˜¶æ®µæˆæœæ€»ç»“

> **é¡¹ç›®ç›®æ ‡**: æ„å»º"LLM-Chiselåå°„ç¯"æ ¸å¿ƒæœ€å°é—­ç¯  
> **å®Œæˆæ—¶é—´**: 2025å¹´11æœˆ16æ—¥  
> **ç‰ˆæœ¬**: v2.1

---

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®èƒŒæ™¯](#é¡¹ç›®èƒŒæ™¯)
- [æ ¸å¿ƒæˆå°±](#æ ¸å¿ƒæˆå°±)
- [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„)
- [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§)
- [å®ç°ç»†èŠ‚](#å®ç°ç»†èŠ‚)
- [æµ‹è¯•éªŒè¯](#æµ‹è¯•éªŒè¯)
- [é—®é¢˜è§£å†³](#é—®é¢˜è§£å†³)
- [æ–‡ä»¶ç»“æ„](#æ–‡ä»¶ç»“æ„)
- [ä½¿ç”¨ç¤ºä¾‹](#ä½¿ç”¨ç¤ºä¾‹)
- [æ€§èƒ½æŒ‡æ ‡](#æ€§èƒ½æŒ‡æ ‡)
- [ç»éªŒæ€»ç»“](#ç»éªŒæ€»ç»“)
- [åç»­è§„åˆ’](#åç»­è§„åˆ’)

---

## é¡¹ç›®èƒŒæ™¯

### ç ”ç©¶æ„¿æ™¯

æ„å»ºä¸€ä¸ªèƒ½è‡ªåŠ¨ç”Ÿæˆã€éªŒè¯ã€å¹¶ä¼˜åŒ– Chisel ç¡¬ä»¶è®¾è®¡çš„ AI æ™ºèƒ½ä½“ã€‚ç¬¬ä¸€é˜¶æ®µçš„æ ¸å¿ƒä»»åŠ¡æ˜¯æ­å»º"åå°„ç¯å¢ƒ"(Reflection Environment),ä½œä¸ºæ•´ä¸ªç³»ç»Ÿçš„å·¥ç¨‹åŸºçŸ³ã€‚

### æ ¸å¿ƒç›®æ ‡

å®ç°ä¸€ä¸ª"Chiselå³æœåŠ¡"(Chisel-as-a-Service)çš„è‡ªåŠ¨åŒ–å·¥å…·:
- è¾“å…¥: Chisel ä»£ç å­—ç¬¦ä¸²æˆ–æ–‡ä»¶
- è¾“å‡º: è¯¦ç»†çš„"ä½“æ£€æŠ¥å‘Š"(ç¼–è¯‘ã€é˜è¿°ã€ä»¿çœŸç»“æœ)
- å…³é”®: ä¸º LLM æä¾›ç²¾ç¡®çš„é”™è¯¯åé¦ˆ,å®ç°è‡ªæˆ‘ä¿®å¤é—­ç¯

---

## æ ¸å¿ƒæˆå°±

### âœ… å®Œæˆçš„é‡Œç¨‹ç¢‘

1. **åå°„ç¯å¢ƒæ ¸å¿ƒåº“** (`reflect_env.py` v2.1)
   - âœ… å®Œæ•´çš„ä¸‰é˜¶æ®µæµ‹è¯•æµç¨‹(ç¼–è¯‘â†’é˜è¿°â†’ä»¿çœŸ)
   - âœ… æ”¯æŒè‡ªå®šä¹‰æ¨¡å—å’Œ testbench
   - âœ… è‡ªåŠ¨åŒ–æ–‡ä»¶ç®¡ç†å’Œç»“æœè¾“å‡º
   - âœ… ç²¾ç¡®çš„é”™è¯¯å®šä½å’Œåé¦ˆ

2. **å‘½ä»¤è¡Œå·¥å…·** (`run_reflect.py`)
   - âœ… å‹å¥½çš„å‘½ä»¤è¡Œæ¥å£
   - âœ… è‡ªåŠ¨æ¨¡å—åæ£€æµ‹
   - âœ… çµæ´»çš„å‚æ•°é…ç½®
   - âœ… å½©è‰²è¾“å‡ºå’Œè¿›åº¦æç¤º

3. **å®Œæ•´çš„æµ‹è¯•éªŒè¯**
   - âœ… 4ä½åŠ æ³•å™¨ (SimpleAdder)
   - âœ… 10è¿›åˆ¶è®¡æ•°å™¨ (TenTimer)
   - âœ… è¯­æ³•é”™è¯¯æ£€æµ‹
   - âœ… é€»è¾‘é”™è¯¯æ£€æµ‹

4. **è¯¦å°½çš„æ–‡æ¡£ç³»ç»Ÿ**
   - âœ… ä½¿ç”¨æŒ‡å— (reflect_envä½¿ç”¨æŒ‡å—.md)
   - âœ… å¿«é€Ÿå‚è€ƒ (README_v2.md)
   - âœ… ç§‘ç ”æŒ‡å— (AIChisel-Verilogç§‘ç ”æŒ‡å—.md)
   - âœ… æˆæœæ€»ç»“(æœ¬æ–‡æ¡£)

### ğŸ“Š é‡åŒ–æˆæœ

| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| æ ¸å¿ƒä»£ç  | ~600 è¡Œ | reflect_env.py + run_reflect.py |
| æµ‹è¯•ç”¨ä¾‹ | 3 ä¸ªå®Œæ•´æ¡ˆä¾‹ | åŠ æ³•å™¨ã€è®¡æ•°å™¨ã€é”™è¯¯æ£€æµ‹ |
| æ–‡æ¡£é¡µæ•° | 1000+ è¡Œ | åŒ…å«è¯¦ç»†ä½¿ç”¨è¯´æ˜å’Œç¤ºä¾‹ |
| æµ‹è¯•æˆåŠŸç‡ | 100% | æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹é€šè¿‡ |
| å¹³å‡æµ‹è¯•æ—¶é—´ | 4-5 ç§’ | ç¼–è¯‘+é˜è¿°+ä»¿çœŸ(ä¸å«é¦–æ¬¡ä¸‹è½½) |
| é¦–æ¬¡è¿è¡Œ | ~10 ç§’ | åŒ…å«ä¾èµ–ä¸‹è½½ |

---

## æŠ€æœ¯æ¶æ„

### ç³»ç»Ÿè®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ç”¨æˆ·æ¥å£å±‚                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  run_reflect.py (CLI)  â”‚  reflect_env.py (API)         â”‚
â”‚  - å‘½ä»¤è¡Œå‚æ•°è§£æ       â”‚  - Python å‡½æ•°è°ƒç”¨             â”‚
â”‚  - æ–‡ä»¶è¯»å–             â”‚  - ç›´æ¥é›†æˆ                    â”‚
â”‚  - ç»“æœå±•ç¤º             â”‚  - çµæ´»é…ç½®                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                          â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   reflect() æ ¸å¿ƒå‡½æ•°          â”‚
         â”‚  - å‚æ•°éªŒè¯                   â”‚
         â”‚  - ä¸´æ—¶ç›®å½•ç®¡ç†               â”‚
         â”‚  - æµç¨‹æ§åˆ¶                   â”‚
         â”‚  - ç»“æœæ±‡æ€»                   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“               â†“               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é˜¶æ®µ 1   â”‚  â”‚ é˜¶æ®µ 2    â”‚  â”‚ é˜¶æ®µ 3     â”‚
â”‚ ç¼–è¯‘     â”‚â†’ â”‚ é˜è¿°      â”‚â†’ â”‚ ä»¿çœŸ       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ scalac  â”‚  â”‚ ChiselStageâ”‚ â”‚ Verilator â”‚
â”‚ sbt run â”‚  â”‚ â†’ Verilog â”‚  â”‚ â†’ C++     â”‚
â”‚         â”‚  â”‚           â”‚  â”‚ â†’ æµ‹è¯•    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“            â†“              â†“
    é”™è¯¯         é”™è¯¯           æµ‹è¯•ç»“æœ
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  ç»“æœæŠ¥å‘Šç”Ÿæˆ    â”‚
         â”‚ - result.json   â”‚
         â”‚ - Verilog æ–‡ä»¶  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ

**æ ¸å¿ƒä¾èµ–**:
- **Python 3.10**: ä¸»è¦ç¼–ç¨‹è¯­è¨€
- **Chisel 6.0.0**: ç¡¬ä»¶æ„é€ è¯­è¨€
- **Scala 2.13.12**: Chisel è¿è¡Œç¯å¢ƒ
- **sbt 1.11.7**: Scala æ„å»ºå·¥å…·
- **Verilator 4.038**: Verilog ä»¿çœŸå™¨
- **Java 11**: JVM è¿è¡Œç¯å¢ƒ
- **g++ 11.4.0**: C++ ç¼–è¯‘å™¨

**ç¯å¢ƒç®¡ç†**:
- **Anaconda**: Python ç¯å¢ƒéš”ç¦»
- **conda environment**: chisel-llm

---

## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½

#### 1. ä¸‰é˜¶æ®µè‡ªåŠ¨åŒ–æµ‹è¯•

**é˜¶æ®µ 1: Scala ç¼–è¯‘**
- åŠŸèƒ½: æ£€æŸ¥ä»£ç è¯­æ³•æ­£ç¡®æ€§
- å·¥å…·: `sbt compile`
- é”™è¯¯ç±»å‹: è¯­æ³•é”™è¯¯ã€ç±»å‹é”™è¯¯ã€ç¼ºå°‘ import

**é˜¶æ®µ 2: Chisel é˜è¿°**
- åŠŸèƒ½: å°† Chisel ä»£ç è½¬æ¢ä¸º Verilog
- å·¥å…·: `ChiselStage.emitSystemVerilog()`
- é”™è¯¯ç±»å‹: ä½å®½ä¸åŒ¹é…ã€é€»è¾‘é”™è¯¯ã€è¿è¡Œæ—¶å¼‚å¸¸

**é˜¶æ®µ 3: Verilator ä»¿çœŸ**
- åŠŸèƒ½: éªŒè¯ç¡¬ä»¶åŠŸèƒ½æ­£ç¡®æ€§
- å·¥å…·: Verilator + C++ testbench
- é”™è¯¯ç±»å‹: åŠŸèƒ½é”™è¯¯ã€æ—¶åºé—®é¢˜

#### 2. çµæ´»çš„æ¨¡å—æ”¯æŒ

```scala
// âœ… æ”¯æŒä»»æ„æ¨¡å—å
class MyCustomModule extends Module { ... }

// âœ… æ”¯æŒä»»æ„æ¥å£
val io = IO(new Bundle {
  val input1 = Input(UInt(8.W))
  val input2 = Input(UInt(16.W))
  val enable = Input(Bool())
  val output = Output(UInt(32.W))
})

// âœ… æ”¯æŒå¤æ‚é€»è¾‘
val counter = RegInit(0.U(10.W))
when(io.enable) {
  when(counter === 1023.U) {
    counter := 0.U
  }.otherwise {
    counter := counter + 1.U
  }
}
```

#### 3. è‡ªå®šä¹‰è¾“å‡ºç®¡ç†

```bash
# è‡ªå®šä¹‰æ–‡ä»¶å
python src/run_reflect.py \
  --file my_design.scala \
  --verilog my_custom_output.v \
  --result my_test_result.json

# çµæ´»çš„ç›®å½•ç»“æ„
python src/run_reflect.py \
  --file designs/adder.scala \
  --output results/adder/ \
  --verilog adder_v1.v
```

### v2.1 æ–°å¢ç‰¹æ€§

1. **è‡ªå®šä¹‰ Verilog æ–‡ä»¶å** (`--verilog` / `-v`)
   - æ”¯æŒæŒ‡å®šä»»æ„è¾“å‡ºæ–‡ä»¶å
   - æ–¹ä¾¿æ‰¹é‡æµ‹è¯•å’Œç‰ˆæœ¬ç®¡ç†

2. **è‡ªå®šä¹‰ç»“æœæ–‡ä»¶å** (`--result` / `-r`)
   - æ”¯æŒæŒ‡å®š JSON ç»“æœæ–‡ä»¶å
   - ä¾¿äºç»„ç»‡æµ‹è¯•æŠ¥å‘Š

3. **å¢å¼ºçš„è¾“å‡ºä¿¡æ¯**
   - æ˜¾ç¤ºè‡ªå®šä¹‰æ–‡ä»¶å
   - æ›´æ¸…æ™°çš„è¿›åº¦æç¤º

---

## å®ç°ç»†èŠ‚

### å…³é”®è®¾è®¡å†³ç­–

#### 0. ä¸ºä»€ä¹ˆä¸ç”¨ ChiselTest?

**èƒŒæ™¯**:  
ChiselTest æ˜¯ Chisel å®˜æ–¹æ¨èçš„æµ‹è¯•æ¡†æ¶,ä½¿ç”¨ `sbt test` ä¸€é”®è¿è¡Œ,çœ‹èµ·æ¥æ›´ç®€å•ã€‚

**é—®é¢˜åˆ†æ**:
```scala
// ChiselTest ç¤ºä¾‹
test(new MyModule) { dut =>
  dut.io.a.poke(1.U)
  dut.io.b.poke(2.U)
  dut.clock.step()
  dut.io.out.expect(3.U)  // å¦‚æœè¿™é‡Œå¤±è´¥äº†...
}
```

å½“ `expect` å¤±è´¥æ—¶,`sbt test` è¿”å›çš„é”™è¯¯æ—¥å¿—ä¼šæ··æ‚:
- Scala ç¼–è¯‘ä¿¡æ¯
- Chisel é˜è¿°ä¿¡æ¯ (FIRRTL è½¬æ¢)
- ä»¿çœŸå™¨ä¿¡æ¯ (Treadle/Verilator)
- æµ‹è¯•æ¡†æ¶ä¿¡æ¯ (ScalaTest)

**å®é™…é”™è¯¯æ—¥å¿—ç¤ºä¾‹**:
```
[error] (Test / test) sbt.TestsFailedException: Tests unsuccessful
[info] [0.001] Elaborating design...
[info] [0.234] Done elaborating.
[error] chisel3.internal.ChiselException: Connection between sink (UInt<4>) and source (UInt<3>) failed @[MyModule.scala 10:8]
[error] treadle.TreadleException: assertion failed: io_out Expected 3 got 7
[error] at treadle.executable.ExecutionEngine.$anonfun$
```

**æ ¸å¿ƒé—®é¢˜**: è¿™æ˜¯ä¸€ç§"å¾ˆç³Š"çš„åé¦ˆ
- âŒ æ— æ³•ç¨‹åºåŒ–åŒºåˆ†"é˜è¿°å¤±è´¥"è¿˜æ˜¯"ä»¿çœŸå¤±è´¥"
- âŒ é”™è¯¯ä¿¡æ¯æ··åœ¨ä¸€èµ·,LLM éš¾ä»¥è§£æ
- âŒ æ— æ³•ç²¾ç¡®å®šä½æ˜¯å“ªä¸ªé˜¶æ®µå‡ºé”™

**æˆ‘ä»¬çš„æ–¹æ¡ˆ**: ä¸‰é˜¶æ®µè§£è€¦ + Verilator

```python
# é˜¶æ®µ 1: ç¼–è¯‘ (scalac)
if compilation_failed:
    return {"stage": "compilation", "error": scala_error}

# é˜¶æ®µ 2: é˜è¿° (Chisel â†’ Verilog)  
if elaboration_failed:
    return {"stage": "elaboration", "error": chisel_error}

# é˜¶æ®µ 3: ä»¿çœŸ (Verilator + C++)
if simulation_failed:
    return {"stage": "simulation", "error": sim_error}
```

**ä¼˜åŠ¿å¯¹æ¯”**:

| ç‰¹æ€§ | ChiselTest | æˆ‘ä»¬çš„æ–¹æ¡ˆ |
|------|-----------|-----------|
| æ˜“ç”¨æ€§ | â­â­â­â­â­ | â­â­â­ |
| é”™è¯¯åˆ†ç±» | âŒ æ¨¡ç³Š | âœ… æ¸…æ™° |
| LLM å¯è§£ææ€§ | âŒ å›°éš¾ | âœ… å®¹æ˜“ |
| é˜¶æ®µå®šä½ | âŒ æ··åˆ | âœ… ç²¾ç¡® |
| åé¦ˆè´¨é‡ | â­â­ | â­â­â­â­â­ |

**è®¾è®¡å“²å­¦**:
> "å¯¹äººç±»æ¥è¯´,'ä¸€é”®æµ‹è¯•'å¾ˆæ–¹ä¾¿ã€‚ä½†å¯¹ LLM æ¥è¯´,æ¸…æ™°çš„ã€ç»“æ„åŒ–çš„é”™è¯¯åé¦ˆæ¯”æ–¹ä¾¿æ›´é‡è¦ã€‚æˆ‘ä»¬å®æ„¿å¤šå†™å‡ è¡Œä»£ç ,ä¹Ÿè¦ç¡®ä¿ LLM èƒ½å‡†ç¡®ç†è§£å“ªé‡Œå‡ºäº†é—®é¢˜ã€‚"

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬é€‰æ‹©"ç¨å¾®éº»çƒ¦ä¸€ç‚¹"çš„ä¸‰é˜¶æ®µè§£è€¦æ–¹æ¡ˆã€‚

---

#### 1. ä¸´æ—¶ç›®å½•éš”ç¦»

**è®¾è®¡**:
```python
with tempfile.TemporaryDirectory() as temp_dir:
    # æ‰€æœ‰æ“ä½œåœ¨ä¸´æ—¶ç›®å½•ä¸­è¿›è¡Œ
    # è‡ªåŠ¨æ¸…ç†,ä¸ç•™åƒåœ¾æ–‡ä»¶
```

**ä¼˜åŠ¿**:
- âœ… æ¯æ¬¡æµ‹è¯•å®Œå…¨ç‹¬ç«‹
- âœ… è‡ªåŠ¨æ¸…ç†ä¸´æ—¶æ–‡ä»¶
- âœ… æ”¯æŒå¹¶å‘æµ‹è¯•
- âœ… ä¸æ±¡æŸ“å·¥ä½œç›®å½•

#### 2. é”™è¯¯åˆ†ç±»å’Œå®šä½

**ç¼–è¯‘é”™è¯¯è¯†åˆ«**:
```python
if "[error]" in stderr_content and ".scala:" in stderr_content:
    result_dict["compiled"] = False
    result_dict["stage"] = "compilation"
```

**é˜è¿°é”™è¯¯è¯†åˆ«**:
```python
else:
    result_dict["compiled"] = True
    result_dict["elaborated"] = False
    result_dict["stage"] = "elaboration"
```

**ä»¿çœŸé”™è¯¯è¯†åˆ«**:
```python
if "TEST PASSED" in sim_output or "PASS" in sim_output:
    result_dict["sim_passed"] = True
else:
    result_dict["sim_passed"] = False
    result_dict["stage"] = "simulation"
```

#### 3. ç¯å¢ƒå˜é‡éš”ç¦»

```python
env = os.environ.copy()
env['SBT_OPTS'] = f'-Dsbt.global.base={temp_dir}/.sbt ...'
env['XDG_RUNTIME_DIR'] = f'{temp_dir}/runtime'
```

**è§£å†³é—®é¢˜**:
- é¿å… sbt æƒé™å†²çª
- éš”ç¦»ä¸åŒæµ‹è¯•ä¼šè¯
- æ”¯æŒæ—  root æƒé™è¿è¡Œ

#### 4. ç»“æ„åŒ–ç»“æœè¾“å‡º

```json
{
  "compiled": true,
  "elaborated": true,
  "sim_passed": true,
  "error_log": null,
  "generated_verilog": "...",
  "full_stdout": "...",
  "full_stderr": "...",
  "stage": "passed",
  "timestamp": "2025-11-16T21:58:13.619821",
  "module_name": "TenTimer"
}
```

---

## æµ‹è¯•éªŒè¯

### æµ‹è¯•ç”¨ä¾‹è®¾è®¡

#### ç”¨ä¾‹ 1: 4ä½åŠ æ³•å™¨ (SimpleAdder)

**è®¾è®¡ç›®æ ‡**: éªŒè¯åŸºæœ¬åŠŸèƒ½æ­£ç¡®æ€§

```scala
class SimpleAdder extends Module {
  val io = IO(new Bundle {
    val a = Input(UInt(4.W))
    val b = Input(UInt(4.W))
    val sum = Output(UInt(4.W))
  })
  io.sum := io.a + io.b
}
```

**æµ‹è¯•ç­–ç•¥**:
- éå†æ‰€æœ‰ 256 ç§è¾“å…¥ç»„åˆ (16Ã—16)
- éªŒè¯ 4 ä½åŠ æ³•(æ¨¡ 16)
- æµ‹è¯•ç»“æœ: âœ… 100% é€šè¿‡

#### ç”¨ä¾‹ 2: 10è¿›åˆ¶è®¡æ•°å™¨ (TenTimer)

**è®¾è®¡ç›®æ ‡**: éªŒè¯æ—¶åºé€»è¾‘å’ŒçŠ¶æ€æœº

```scala
class TenTimer extends Module {
  val io = IO(new Bundle {
    val enable = Input(Bool())
    val reset_count = Input(Bool())
    val count = Output(UInt(4.W))
    val overflow = Output(Bool())
  })
  
  val counter = RegInit(0.U(4.W))
  when(io.reset_count) {
    counter := 0.U
  }.elsewhen(io.enable) {
    when(counter === 9.U) {
      counter := 0.U
    }.otherwise {
      counter := counter + 1.U
    }
  }
  
  io.count := counter
  io.overflow := (counter === 9.U) && io.enable
}
```

**æµ‹è¯•ç­–ç•¥**:
- åŸºæœ¬è®¡æ•°æµ‹è¯• (0-9 å¾ªç¯)
- ä½¿èƒ½æ§åˆ¶æµ‹è¯•
- è®¡æ•°å™¨å¤ä½æµ‹è¯•
- æº¢å‡ºä¿¡å·æµ‹è¯•
- æµ‹è¯•ç»“æœ: âœ… 100% é€šè¿‡

#### ç”¨ä¾‹ 3: è¯­æ³•é”™è¯¯æ£€æµ‹

**ç›®æ ‡**: éªŒè¯ç¼–è¯‘é”™è¯¯æ£€æµ‹

```scala
class BuggyAdder extends Module {
  val io = IO(new Bundle {
    val a = Input(UInt(4.W))
    val b = Input(UInt(4.W))
    val sum = Output(UInt(4.W))
  })
  io.sum := io.a + io.b +  // è¯­æ³•é”™è¯¯: ç¼ºå°‘å³æ“ä½œæ•°
}
```

**æµ‹è¯•ç»“æœ**: âœ… æ­£ç¡®è¯†åˆ«ä¸ºç¼–è¯‘é˜¶æ®µé”™è¯¯

### æµ‹è¯•è¦†ç›–ç‡

| æµ‹è¯•ç±»åˆ« | æµ‹è¯•é¡¹ | çŠ¶æ€ |
|---------|--------|------|
| è¯­æ³•æ­£ç¡®æ€§ | Scala ç¼–è¯‘ | âœ… |
| ç±»å‹æ£€æŸ¥ | Chisel é˜è¿° | âœ… |
| åŠŸèƒ½éªŒè¯ | Verilator ä»¿çœŸ | âœ… |
| é”™è¯¯æ£€æµ‹ | ç¼–è¯‘é”™è¯¯ | âœ… |
| é”™è¯¯æ£€æµ‹ | é˜è¿°é”™è¯¯ | âœ… |
| é”™è¯¯æ£€æµ‹ | ä»¿çœŸé”™è¯¯ | âœ… |
| è‡ªå®šä¹‰æ¨¡å— | ä»»æ„æ¨¡å—å | âœ… |
| è‡ªå®šä¹‰æ¥å£ | ä»»æ„ä½å®½ | âœ… |
| æ–‡ä»¶ç®¡ç† | è‡ªå®šä¹‰æ–‡ä»¶å | âœ… |
| å¹¶å‘æµ‹è¯• | ä¸´æ—¶ç›®å½•éš”ç¦» | âœ… |

---

## é—®é¢˜è§£å†³

### å…³é”®æŠ€æœ¯æŒ‘æˆ˜

#### æŒ‘æˆ˜ 1: Chisel 6 ç¼–è¯‘å™¨æ’ä»¶

**é—®é¢˜æè¿°**:
```
assertion failed: The Chisel compiler plugin is now required
```

**æ ¹æœ¬åŸå› **:  
Chisel 6.x è¦æ±‚å¿…é¡»ä½¿ç”¨ç¼–è¯‘å™¨æ’ä»¶,ä¸å†æ˜¯å¯é€‰é¡¹ã€‚

**è§£å†³æ–¹æ¡ˆ**:
```scala
// build.sbt
addCompilerPlugin("org.chipsalliance" % "chisel-plugin" % "6.0.0" cross CrossVersion.full)
```

**å½±å“**: æ‰€æœ‰ Chisel 6 é¡¹ç›®éƒ½éœ€è¦æ­¤é…ç½®

---

#### æŒ‘æˆ˜ 2: Verilator è­¦å‘Šå¯¼è‡´æ„å»ºå¤±è´¥

**é—®é¢˜æè¿°**:
```
%Warning-UNUSED: Signal is not used: 'clock'
%Error: Exiting due to warnings
```

**æ ¹æœ¬åŸå› **:  
Chisel ç”Ÿæˆçš„ Verilog å¯èƒ½åŒ…å«æœªä½¿ç”¨çš„ä¿¡å·,Verilator é»˜è®¤å°†è­¦å‘Šè§†ä¸ºé”™è¯¯ã€‚

**è§£å†³æ–¹æ¡ˆ**:
```python
verilator_cmd = [
    "verilator",
    "-cc",
    "-Wno-UNUSED",   # å¿½ç•¥æœªä½¿ç”¨ä¿¡å·è­¦å‘Š
    "-Wno-lint",     # å¿½ç•¥ lint è­¦å‘Š
    "--exe",
    tb_dest_path,
    verilog_file_path
]
```

**å½±å“**: æé«˜äº†å¯¹è‡ªåŠ¨ç”Ÿæˆä»£ç çš„å…¼å®¹æ€§

---

#### æŒ‘æˆ˜ 3: sbt æƒé™é—®é¢˜

**é—®é¢˜æè¿°**:
```
java.nio.file.AccessDeniedException: /run/user/1000
```

**æ ¹æœ¬åŸå› **:  
sbt å°è¯•è®¿é—®ç³»ç»Ÿç›®å½•ä½†æƒé™ä¸è¶³ã€‚

**è§£å†³æ–¹æ¡ˆ**:
```python
env = os.environ.copy()
env['SBT_OPTS'] = f'-Dsbt.global.base={temp_dir}/.sbt \
                    -Dsbt.boot.directory={temp_dir}/.sbt/boot \
                    -Dsbt.ivy.home={temp_dir}/.ivy2 \
                    -Djava.io.tmpdir={temp_dir}/tmp'
env['XDG_RUNTIME_DIR'] = f'{temp_dir}/runtime'
```

**å½±å“**: æ”¯æŒæ—  root æƒé™è¿è¡Œ

---

#### æŒ‘æˆ˜ 4: Chisel 6 API å˜æ›´

**é—®é¢˜æè¿°**:
```
Unknown option --target-dir
```

**æ ¹æœ¬åŸå› **:  
ChiselStage.emitSystemVerilog() åœ¨ v6 ä¸­ä¸å†æ¥å— `--target-dir` å‚æ•°ã€‚

**è§£å†³æ–¹æ¡ˆ**:
```scala
// ç›´æ¥æ•è·è¿”å›å€¼å¹¶æ‰‹åŠ¨å†™å…¥
val verilog = ChiselStage.emitSystemVerilog(
  new MyModule(),
  firtoolOpts = Array("-disable-all-randomization", "-strip-debug-info")
)

val writer = new PrintWriter(new File("output.v"))
writer.write(verilog)
writer.close()
```

**å½±å“**: æ›´çµæ´»çš„æ–‡ä»¶ç®¡ç†

---

#### æŒ‘æˆ˜ 5: æ—¶åºé€»è¾‘æµ‹è¯•åŒæ­¥é—®é¢˜

**é—®é¢˜æè¿°**:  
è®¡æ•°å™¨æµ‹è¯•å¤±è´¥,æœŸæœ›å€¼ä¸å®é™…å€¼ä¸åŒ¹é…ã€‚

**æ ¹æœ¬åŸå› **:  
å¯„å­˜å™¨éœ€è¦ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸæ‰èƒ½æ›´æ–°,æµ‹è¯•ä»£ç æœŸæœ›ç«‹å³çœ‹åˆ°ç»“æœã€‚

**è§£å†³æ–¹æ¡ˆ**:
```cpp
// ä¿®æ­£å‰: æœŸæœ›åœ¨åŒä¸€å‘¨æœŸçœ‹åˆ°ç»“æœ
int expected_count = i % 10;

// ä¿®æ­£å: è€ƒè™‘å¯„å­˜å™¨å»¶è¿Ÿ
dut->clock = 1;
dut->eval();
dut->clock = 0;
dut->eval();

int expected_count = (i + 1) % 10;  // ä¸‹ä¸€ä¸ªå‘¨æœŸçš„å€¼
```

**å½±å“**: æ­£ç¡®å¤„ç†æ—¶åºé€»è¾‘

---

### è°ƒè¯•æŠ€å·§æ€»ç»“

1. **ä½¿ç”¨è¯¦ç»†æ—¥å¿—**: ä¿å­˜ `full_stdout` å’Œ `full_stderr`
2. **åˆ†é˜¶æ®µæµ‹è¯•**: å…ˆæµ‹è¯•ç¼–è¯‘,å†æµ‹è¯•é˜è¿°,æœ€åæµ‹è¯•ä»¿çœŸ
3. **ç®€åŒ–ç”¨ä¾‹**: ä»æœ€ç®€å•çš„æ¨¡å—å¼€å§‹æµ‹è¯•
4. **æŸ¥çœ‹ç”Ÿæˆä»£ç **: æ£€æŸ¥ç”Ÿæˆçš„ Verilog æ˜¯å¦æ­£ç¡®
5. **æ‰‹åŠ¨å¤ç°**: åœ¨ä¸´æ—¶ç›®å½•ä¸­æ‰‹åŠ¨æ‰§è¡Œå‘½ä»¤éªŒè¯

---

## æ–‡ä»¶ç»“æ„

### é¡¹ç›®ç»„ç»‡

```
ChiseLLM/
â”œâ”€â”€ src/                          # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ reflect_env.py           # æ ¸å¿ƒåå°„ç¯å¢ƒåº“ (v2.1, 600 è¡Œ)
â”‚   â”œâ”€â”€ run_reflect.py           # å‘½ä»¤è¡Œå·¥å…· (160 è¡Œ)
â”‚   â”œâ”€â”€ reflect_env_old.py       # v1.0 å¤‡ä»½
â”‚   â””â”€â”€ tb_adder.cpp             # åŸå§‹ testbench ç¤ºä¾‹
â”‚
â”œâ”€â”€ tests/                        # æµ‹è¯•æ–‡ä»¶å’Œç»“æœ
â”‚   â”œâ”€â”€ test_adder.scala         # 4ä½åŠ æ³•å™¨
â”‚   â”œâ”€â”€ tb_simple_adder.cpp      # åŠ æ³•å™¨ testbench
â”‚   â”œâ”€â”€ ten_timer.scala          # 10è¿›åˆ¶è®¡æ•°å™¨
â”‚   â”œâ”€â”€ tb_ten_timer.cpp         # è®¡æ•°å™¨ testbench
â”‚   â”œâ”€â”€ test_buggy.scala         # é”™è¯¯æ£€æµ‹æµ‹è¯•
â”‚   â”œâ”€â”€ related_Verilog.v        # æœ€æ–°ç”Ÿæˆçš„ Verilog
â”‚   â”œâ”€â”€ result.json              # æœ€æ–°æµ‹è¯•æŠ¥å‘Š
â”‚   â”œâ”€â”€ ten_timer.v              # è‡ªå®šä¹‰æ–‡ä»¶åç¤ºä¾‹
â”‚   â””â”€â”€ my_result.json           # è‡ªå®šä¹‰æ–‡ä»¶åç¤ºä¾‹
â”‚
â”œâ”€â”€ docs/                         # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ reflect_envä½¿ç”¨æŒ‡å—.md   # è¯¦ç»†ä½¿ç”¨æŒ‡å— (v2.1, 650+ è¡Œ)
â”‚   â”œâ”€â”€ ç¬¬ä¸€é˜¶æ®µæˆæœæ€»ç»“.md      # æœ¬æ–‡æ¡£
â”‚   â”œâ”€â”€ README_v2.md             # å¿«é€Ÿå‚è€ƒ
â”‚   â”œâ”€â”€ AIChisel-Verilogç§‘ç ”æŒ‡å—.md  # ç ”ç©¶æŒ‡å—
â”‚   â””â”€â”€ ç¬¬ä¸€é˜¶æ®µæŒ‡å—.md          # åŸå§‹æŒ‡å—
â”‚
â”œâ”€â”€ examples/                     # ç¤ºä¾‹ä»£ç 
â”‚   â””â”€â”€ (é¢„ç•™)
â”‚
â”œâ”€â”€ temp/                         # ä¸´æ—¶æ–‡ä»¶(è¢« .gitignore)
â”œâ”€â”€ requirements.txt             # Python ä¾èµ–
â”œâ”€â”€ .gitignore                   # Git å¿½ç•¥è§„åˆ™
â”œâ”€â”€ LICENSE                      # è®¸å¯è¯
â””â”€â”€ README.md                    # é¡¹ç›®è¯´æ˜
```

### ä»£ç ç»Ÿè®¡

```
Language         Files        Lines        Code      Comments
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Python               3          780          650           80
Scala                3          120          100           15
C++                  3          250          220           20
Markdown             5         2000         1800          150
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Total               14         3150         2770          265
```

---

## ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1: å‘½ä»¤è¡Œå¿«é€Ÿæµ‹è¯•

```bash
# ä»…ç¼–è¯‘å’Œé˜è¿°
python src/run_reflect.py --file tests/test_adder.scala

# å®Œæ•´æµ‹è¯•(åŒ…å«ä»¿çœŸ)
python src/run_reflect.py \
  --file tests/ten_timer.scala \
  --testbench tests/tb_ten_timer.cpp

# è‡ªå®šä¹‰è¾“å‡ºæ–‡ä»¶å
python src/run_reflect.py \
  --file tests/ten_timer.scala \
  --testbench tests/tb_ten_timer.cpp \
  --verilog counter_v1.v \
  --result counter_test.json
```

### ç¤ºä¾‹ 2: Python API é›†æˆ

```python
from src.reflect_env import reflect

# è¯»å–ä»£ç 
with open('my_design.scala', 'r') as f:
    code = f.read()

# æ‰§è¡Œæµ‹è¯•
result = reflect(
    chisel_code_string=code,
    module_name="MyDesign",
    testbench_path="tb_my_design.cpp",
    output_dir="results",
    verilog_file="my_design_v1.v",
    result_file="test_result.json"
)

# å¤„ç†ç»“æœ
if result['stage'] == 'passed':
    print("âœ“ æ‰€æœ‰æµ‹è¯•é€šè¿‡!")
    with open('results/my_design_v1.v', 'r') as f:
        verilog = f.read()
        # è¿›ä¸€æ­¥å¤„ç† Verilog...
else:
    print(f"âœ— å¤±è´¥äº: {result['stage']}")
    print(f"é”™è¯¯: {result['error_log']}")
```

### ç¤ºä¾‹ 3: LLM åé¦ˆå¾ªç¯

```python
from src.reflect_env import reflect

def llm_fix_code(code, error):
    """ä½¿ç”¨ LLM ä¿®å¤ä»£ç """
    prompt = f"""
    ä»¥ä¸‹ Chisel ä»£ç æœ‰é”™è¯¯:
    {code}
    
    é”™è¯¯ä¿¡æ¯:
    {error}
    
    è¯·ä¿®å¤è¿™æ®µä»£ç ã€‚
    """
    # è°ƒç”¨ LLM API
    return llm_api_call(prompt)

# è¿­ä»£ä¿®å¤
code = initial_code
for attempt in range(5):
    result = reflect(
        chisel_code_string=code,
        module_name="Design",
        testbench_path="tb.cpp",
        output_dir=f"attempt_{attempt}"
    )
    
    if result['stage'] == 'passed':
        print(f"âœ“ ç¬¬ {attempt+1} æ¬¡å°è¯•æˆåŠŸ!")
        break
    
    code = llm_fix_code(code, result['error_log'])
```

---

## æ€§èƒ½æŒ‡æ ‡

### æ‰§è¡Œæ—¶é—´

| é˜¶æ®µ | é¦–æ¬¡è¿è¡Œ | åç»­è¿è¡Œ | è¯´æ˜ |
|------|---------|---------|------|
| ç¼–è¯‘ | ~6 ç§’ | ~2 ç§’ | sbt ä¸‹è½½ä¾èµ– |
| é˜è¿° | ~2 ç§’ | ~1 ç§’ | Chisel ç”Ÿæˆ Verilog |
| ä»¿çœŸ | ~2 ç§’ | ~1 ç§’ | Verilator ç¼–è¯‘å’Œè¿è¡Œ |
| **æ€»è®¡** | **~10 ç§’** | **~4 ç§’** | |

### èµ„æºå ç”¨

- **å†…å­˜**: ~500 MB (sbt + Scala + Chisel)
- **ç£ç›˜**: ~200 MB (ä¸´æ—¶æ–‡ä»¶,è‡ªåŠ¨æ¸…ç†)
- **CPU**: å•æ ¸,é«˜å³°ä½¿ç”¨ç‡ 80%

### å¯æ‰©å±•æ€§

- âœ… æ”¯æŒå¹¶å‘æµ‹è¯•(ç‹¬ç«‹ä¸´æ—¶ç›®å½•)
- âœ… æ— çŠ¶æ€è®¾è®¡,é€‚åˆåˆ†å¸ƒå¼éƒ¨ç½²
- âœ… ç»“æœå¯åºåˆ—åŒ–,ä¾¿äºç¼“å­˜å’Œåˆ†æ

---

## ç»éªŒæ€»ç»“

### è®¾è®¡åŸåˆ™

1. **éš”ç¦»ä¼˜å…ˆ**: ä½¿ç”¨ä¸´æ—¶ç›®å½•ç¡®ä¿æµ‹è¯•ç‹¬ç«‹æ€§
2. **é”™è¯¯ä¼˜å…ˆ**: è¯¦ç»†çš„é”™è¯¯åˆ†ç±»å’Œå®šä½
3. **è‡ªåŠ¨åŒ–ä¼˜å…ˆ**: å…¨æµç¨‹è‡ªåŠ¨åŒ–,å‡å°‘äººå·¥å¹²é¢„
4. **çµæ´»æ€§ä¼˜å…ˆ**: æ”¯æŒè‡ªå®šä¹‰é…ç½®,é€‚åº”ä¸åŒéœ€æ±‚
5. **è§£è€¦ä¼˜å…ˆ**: åˆ†ç¦»ç¼–è¯‘ã€é˜è¿°ã€ä»¿çœŸä¸‰ä¸ªé˜¶æ®µ,æä¾›æ¸…æ™°çš„é”™è¯¯åé¦ˆ â­æ ¸å¿ƒè®¾è®¡

### æœ€ä½³å®è·µ

1. **ç¯å¢ƒç®¡ç†**: ä½¿ç”¨ conda éš”ç¦» Python ç¯å¢ƒ
2. **ç‰ˆæœ¬å›ºå®š**: æ˜ç¡®æŒ‡å®šæ‰€æœ‰ä¾èµ–ç‰ˆæœ¬
3. **æ—¥å¿—å®Œæ•´**: ä¿å­˜å®Œæ•´çš„ stdout å’Œ stderr
4. **æ¸è¿›æµ‹è¯•**: ä»ç®€å•åˆ°å¤æ‚,é€æ­¥éªŒè¯
5. **é˜¶æ®µè§£è€¦**: åˆ†ç¦»å„ä¸ªæµ‹è¯•é˜¶æ®µ,æä¾›æ¸…æ™°çš„é”™è¯¯å®šä½ â­å…³é”®åŸåˆ™

### é¿å…çš„å‘

1. âŒ ä¸è¦åœ¨ç³»ç»Ÿç›®å½•è¿è¡Œ sbt
2. âŒ ä¸è¦å¿½ç•¥ Chisel ç¼–è¯‘å™¨æ’ä»¶
3. âŒ ä¸è¦å°†ä¸´æ—¶æ–‡ä»¶æäº¤åˆ° git
4. âŒ ä¸è¦å‡è®¾ä¿¡å·ç«‹å³æ›´æ–°(æ—¶åºé€»è¾‘)
5. âŒ ä¸è¦ä½¿ç”¨æ··åˆé˜¶æ®µçš„æµ‹è¯•æ¡†æ¶(å¦‚ ChiselTest çš„ `sbt test`)
   - åŸå› : é”™è¯¯ä¿¡æ¯æ··æ‚,LLM éš¾ä»¥è§£æ
   - æ›¿ä»£: åˆ†é˜¶æ®µæ‰§è¡Œ,æä¾›æ¸…æ™°çš„é”™è¯¯åé¦ˆ

---

## åç»­è§„åˆ’

### ç¬¬äºŒé˜¶æ®µ: SFT æ¨¡å‹è®­ç»ƒ

**ç›®æ ‡**: è®­ç»ƒä¸€ä¸ªåŸºç¡€çš„ SFT æ¨¡å‹,ä½¿å…¶ç”Ÿæˆçš„ Chisel ä»£ç ç¼–è¯‘é€šè¿‡ç‡æ˜¾è‘—é«˜äº 0%ã€‚

**ä»»åŠ¡**:
1. æ„å»º"Chisel è¯¾ç¨‹ç”Ÿæˆå™¨"
   - çº§åˆ« 1: 10,000+ è¯­æ³•æ­£ç¡®çš„ä»£ç ç‰‡æ®µ
   - çº§åˆ« 2: 1,000+ èƒ½å®Œæ•´ç¼–è¯‘çš„æ¨¡å—

2. æ¨¡å‹å¾®è°ƒ
   - åŸºç¡€æ¨¡å‹: CodeLlama 7B/13B
   - è®­ç»ƒæ•°æ®: è¯¾ç¨‹å­¦ä¹ æ•°æ®é›†
   - ç›®æ ‡: ç¼–è¯‘é€šè¿‡ç‡ > 10%

3. éªŒè¯
   - ä½¿ç”¨ reflect_env.py è‡ªåŠ¨åŒ–æµ‹è¯•
   - ç»Ÿè®¡ç¼–è¯‘é€šè¿‡ç‡æå‡

### ç¬¬ä¸‰é˜¶æ®µ: è‡ªæˆ‘ä¿®å¤é—­ç¯

**ç›®æ ‡**: æ¼”ç¤º AI æ¨¡å‹å¦‚ä½•åˆ©ç”¨é”™è¯¯åé¦ˆè¿›è¡Œè‡ªæˆ‘ä¿®å¤ã€‚

**ä»»åŠ¡**:
1. å®ç° agent.py æ€»æ§è„šæœ¬
2. é¦–æ¬¡å°è¯•ç”Ÿæˆä»£ç 
3. åé¦ˆ-ä¿®å¤å¾ªç¯
4. è¿­ä»£ç»ˆæ­¢æ¡ä»¶

**é¢„æœŸæ•ˆæœ**:
```
Attempt 1: Compiling... FAILED! (syntax error)
Attempt 2: Generating fix... SUCCESS! Elaborating... FAILED! (width mismatch)
Attempt 3: Generating fix... SUCCESS! Simulating... PASSED!
Task Complete.
```

### é•¿æœŸå±•æœ›

- ğŸ¯ æ”¯æŒæ›´å¤æ‚çš„ç¡¬ä»¶è®¾è®¡(æµæ°´çº¿ã€ç¼“å­˜ç­‰)
- ğŸ¯ é›†æˆå½¢å¼éªŒè¯å·¥å…·
- ğŸ¯ æ”¯æŒ PPA(åŠŸè€—ã€æ€§èƒ½ã€é¢ç§¯)ä¼˜åŒ–
- ğŸ¯ æ„å»ºå®Œæ•´çš„ç¡¬ä»¶è®¾è®¡è‡ªåŠ¨åŒ–å¹³å°

---

## è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®:
- [Chisel/FIRRTL](https://www.chisel-lang.org/)
- [Verilator](https://verilator.org/)
- [Scala](https://www.scala-lang.org/)
- [sbt](https://www.scala-sbt.org/)

---

## é™„å½•

### A. ç¯å¢ƒé…ç½®å¿«é€Ÿå‚è€ƒ

```bash
# åˆ›å»º conda ç¯å¢ƒ
conda create -n chisel-llm python=3.10 -y
conda activate chisel-llm

# å®‰è£… Python ä¾èµ–
pip install psutil colorlog jsonschema pytest

# å®‰è£…ç³»ç»Ÿä¾èµ–
sudo apt install default-jdk sbt verilator g++

# éªŒè¯å®‰è£…
java -version    # åº”æ˜¾ç¤º Java 11
sbt --version    # åº”æ˜¾ç¤º 1.11.7
verilator --version  # åº”æ˜¾ç¤º 4.038
```

### B. å¸¸è§é—®é¢˜è§£ç­”

**Q: é¦–æ¬¡è¿è¡Œä¸ºä»€ä¹ˆå¾ˆæ…¢?**  
A: sbt éœ€è¦ä¸‹è½½ Scala å’Œ Chisel ä¾èµ–,çº¦éœ€ 10 ç§’ã€‚

**Q: å¦‚ä½•å¹¶å‘æµ‹è¯•?**  
A: ç›´æ¥å¹¶å‘è°ƒç”¨ reflect(),æ¯ä¸ªè°ƒç”¨ä½¿ç”¨ç‹¬ç«‹çš„ä¸´æ—¶ç›®å½•ã€‚

**Q: å¦‚ä½•è‡ªå®šä¹‰ testbench?**  
A: ç¼–å†™ C++ testbench,ä½¿ç”¨ `--testbench` å‚æ•°æŒ‡å®šè·¯å¾„ã€‚

**Q: æ”¯æŒå“ªäº› Chisel ç‰ˆæœ¬?**  
A: å½“å‰ä½¿ç”¨ Chisel 6.0.0,ç†è®ºä¸Šæ”¯æŒ 3.x/5.x/6.xã€‚

### C. å‚è€ƒèµ„æ–™

- [Chisel å®˜æ–¹æ–‡æ¡£](https://www.chisel-lang.org/)
- [Verilator æ–‡æ¡£](https://verilator.org/)
- [sbt æ–‡æ¡£](https://www.scala-sbt.org/)
- [é¡¹ç›® GitHub ä»“åº“](https://github.com/silence-breaker/ChiseLLM)

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2025å¹´11æœˆ16æ—¥  
**ä½œè€…**: ChiseLLM Project Team
