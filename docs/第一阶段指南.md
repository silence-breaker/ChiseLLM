# 第一阶段细化指南：

# 构建“反射环境” (The Reflection Environment)

## 一、 目标与环境准备 (Objective & Environment Setup)

### 1. 核心目标

我们的唯一目标是：**在 Python 中创建一个函数 `reflect(code_string)`**。 这个函数接收一个 Chisel/Scala 代码字符串，然后返回一个“体检报告”（一个 JSON 对象），详细说明这段代码在编译、阐述、仿真这三环中走到了哪一步，以及出了什么错。

### 2. 必备工具链（你的“作业”#0）

你必须在你的开发环境中安装以下所有工具。这是**首要任务**。

- **Python 3.8+:** 并安装 `virtualenv` (推荐使用 `python -m venv venv`)。
    
- **Java Development Kit (JDK):** 版本 11 或 17 均可。这是运行 `sbt` 和 Scala 的基础。
    
- **sbt (Scala Build Tool):** 这是 Scala 的标准构建工具，它将为我们自动管理 Chisel 的依赖。
    
- **Verilator:** 一个开源的、高性能 Verilog 仿真器。我们需要用它来跑我们的 C++ testbench。
    
- **C++ 编译器:** 例如 `g++` (Linux) 或 `clang++` (macOS) 或 MSVC (Windows)。Verilator 需要它来编译仿真模型。
    

## 二、 核心功能设计：`reflect` 函数框架

我们将使用 Python 的 `subprocess` 和 `tempfile` 库。`tempfile` 帮我们创建安全的临时工作目录，`subprocess` 帮我们调用所有外部工具。

这是你的 Python 脚本 (`reflect_env.py`) 的基本框架：