# âš¡ ChiseLLM

<p align="center">
  <b>AI é©±åŠ¨çš„ Chisel ç¡¬ä»¶è®¾è®¡ç”Ÿæˆä¸éªŒè¯å¹³å°</b>
</p>

<p align="center">
  <img src="https://img.shields.io/badge/Chisel-6.0.0-blue" alt="Chisel">
  <img src="https://img.shields.io/badge/Scala-2.13.12-red" alt="Scala">
  <img src="https://img.shields.io/badge/Python-3.10-green" alt="Python">
  <img src="https://img.shields.io/badge/Streamlit-Cloud-ff4b4b" alt="Streamlit">
  <img src="https://img.shields.io/badge/License-MIT-yellow" alt="License">
</p>

---

## ğŸ¯ é¡¹ç›®ç®€ä»‹

**ChiseLLM** æ˜¯ä¸€ä¸ªåˆ©ç”¨å¤§è¯­è¨€æ¨¡å‹ (LLM) è¿›è¡Œç¡¬ä»¶ä»£ç è‡ªåŠ¨ç”Ÿæˆä¸è‡ªæˆ‘ä¿®å¤çš„ç³»ç»Ÿã€‚é¡¹ç›®å®ç°äº†ä»è‡ªç„¶è¯­è¨€éœ€æ±‚åˆ°å¯ä»¿çœŸç¡¬ä»¶è®¾è®¡çš„å®Œæ•´é—­ç¯ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ”„ **è‡ªåŠ¨ä»£ç ç”Ÿæˆ** - æ ¹æ®è‡ªç„¶è¯­è¨€æè¿°ç”Ÿæˆ Chisel ç¡¬ä»¶ä»£ç 
- ğŸ” **åå°„éªŒè¯é—­ç¯** - ç¼–è¯‘â†’é˜è¿°â†’ä»¿çœŸä¸‰é˜¶æ®µè‡ªåŠ¨éªŒè¯
- ğŸ› ï¸ **è‡ªæ„ˆå¼ä¿®å¤** - éªŒè¯å¤±è´¥è‡ªåŠ¨åé¦ˆç»™ LLM è¿›è¡Œä¿®å¤
- ğŸ§ª **è‡ªåŠ¨ Testbench** - è‡ªåŠ¨ç”Ÿæˆ C++ Verilator Testbench
- ğŸŒŠ **æ³¢å½¢å¯è§†åŒ–** - VCD æ³¢å½¢å®æ—¶æ¸²æŸ“ï¼ˆWaveDromï¼‰
- ğŸŒ **Web å·¥ä½œå°** - Streamlit é©±åŠ¨çš„åœ¨çº¿ IDE

---

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ChiseLLM æ™ºèƒ½å·¥ä½œå° (Web)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç”¨æˆ·éœ€æ±‚ â†’ LLM ç”Ÿæˆ â†’ åå°„éªŒè¯ â†’ è‡ªåŠ¨ä¿®å¤ â†’ ä»¿çœŸ â†’ æ³¢å½¢     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   LLM Provider  â”‚  â”‚   Reflect Env   â”‚  â”‚   VCD Parser    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â€¢ Gemini       â”‚  â”‚  â€¢ Mill ç¼–è¯‘    â”‚  â”‚  â€¢ æ³¢å½¢è§£æ     â”‚
â”‚  â€¢ OpenAI       â”‚  â”‚  â€¢ Verilator    â”‚  â”‚  â€¢ WaveDrom     â”‚
â”‚  â€¢ DeepSeek     â”‚  â”‚  â€¢ VCD ç”Ÿæˆ     â”‚  â”‚  â€¢ HTML æ¸²æŸ“    â”‚
â”‚  â€¢ Claude       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â€¢ SiliconFlow  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š é¡¹ç›®è¿›å±•

| é˜¶æ®µ | ç›®æ ‡ | çŠ¶æ€ |
|------|------|------|
| **Stage 1** | åå°„ç¯å¢ƒ (Reflect Env) æ„å»º | âœ… å·²å®Œæˆ |
| **Stage 2** | SFT æ•°æ®é›†ç”Ÿæˆ (10,550 æ¡) | âœ… å·²å®Œæˆ |
| **Stage 3** | Web æ™ºèƒ½å·¥ä½œå°éƒ¨ç½² | âœ… å·²å®Œæˆ |

### ğŸ“ æ•°æ®èµ„äº§

| æ•°æ®é›† | æ ·æœ¬æ•° | è¯´æ˜ |
|--------|--------|------|
| `chisel_sft_merged_10550.jsonl` | 10,550 | å®Œæ•´è®­ç»ƒé›† |
| `eval_set_v1.jsonl` | 37 | è¯„ä¼°æµ‹è¯•é›† |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åœ¨çº¿ä½“éªŒ

è®¿é—® [ChiseLLM æ™ºèƒ½å·¥ä½œå°](https://chisel-llm.streamlit.app) (Streamlit Cloud)

### æœ¬åœ°è¿è¡Œ

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/silence-breaker/ChiseLLM.git
cd ChiseLLM

# 2. åˆ›å»ºç¯å¢ƒ
conda create -n chisel-llm python=3.10
conda activate chisel-llm
pip install -r requirements.txt

# 3. é…ç½® API (å¯é€‰)
mkdir -p .streamlit
cat > .streamlit/secrets.toml << 'EOF'
[default]
api_key = "your-api-key"
base_url = "https://api.siliconflow.cn/v1"
model_name = "deepseek-ai/DeepSeek-V3"
EOF

# 4. å¯åŠ¨åº”ç”¨
streamlit run app.py
```

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
ChiseLLM/
â”œâ”€â”€ app.py                    # Streamlit Web åº”ç”¨å…¥å£
â”œâ”€â”€ build.sc                  # Mill æ„å»ºé…ç½®
â”œâ”€â”€ requirements.txt          # Python ä¾èµ–
â”‚
â”œâ”€â”€ src/                      # æ ¸å¿ƒæºç 
â”‚   â”œâ”€â”€ agent.py              # æ™ºèƒ½ä»£ç† (ç”Ÿæˆ-éªŒè¯-ä¿®å¤å¾ªç¯)
â”‚   â”œâ”€â”€ llm_provider.py       # å¤š LLM Provider ç»Ÿä¸€æ¥å£
â”‚   â”œâ”€â”€ reflect_env.py        # åå°„éªŒè¯ç¯å¢ƒ
â”‚   â”œâ”€â”€ vcd_parser.py         # VCD æ³¢å½¢è§£æå™¨
â”‚   â””â”€â”€ run_reflect.py        # å‘½ä»¤è¡ŒéªŒè¯å·¥å…·
â”‚
â”œâ”€â”€ data_gen/                 # æ•°æ®ç”Ÿæˆå·¥å…·
â”‚   â”œâ”€â”€ generator_V2.py       # æ‰¹é‡æ•°æ®ç”Ÿæˆå™¨
â”‚   â””â”€â”€ merge_and_prepare.py  # æ•°æ®åˆå¹¶è„šæœ¬
â”‚
â”œâ”€â”€ eval/                     # è¯„ä¼°æ¡†æ¶
â”‚   â”œâ”€â”€ generate_eval_set.py  # æµ‹è¯•é›†ç”Ÿæˆ
â”‚   â””â”€â”€ run_eval.py           # æ¨¡å‹è¯„ä¼°è„šæœ¬
â”‚
â”œâ”€â”€ dataset/                  # æ•°æ®é›†
â”‚   â””â”€â”€ chisel_sft_merged_10550.jsonl
â”‚
â”œâ”€â”€ training/                 # è®­ç»ƒé…ç½®
â”‚   â””â”€â”€ chisel_lora_config.yaml
â”‚
â””â”€â”€ docs/                     # æ–‡æ¡£
    â”œâ”€â”€ ç¬¬ä¸€é˜¶æ®µæˆæœæ€»ç»“.md
    â”œâ”€â”€ ç¬¬äºŒé˜¶æ®µæˆæœæ€»ç»“.md
    â””â”€â”€ ç¬¬ä¸‰é˜¶æ®µæˆæœæ€»ç»“.md
```

---

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½

### 1ï¸âƒ£ åå°„éªŒè¯ç¯å¢ƒ

ä¸‰é˜¶æ®µè§£è€¦éªŒè¯æµç¨‹ï¼š

```python
from src.reflect_env import reflect

result = reflect(
    chisel_code_string=code,
    module_name="MyModule",
    testbench_path="tb.cpp"  # å¯é€‰
)

# è¿”å›: compiled, elaborated, sim_passed, generated_verilog, vcd_content
```

### 2ï¸âƒ£ å¤š LLM Provider

æ”¯æŒ 7 ç§ API Providerï¼š

| Provider | åè®® | ç¤ºä¾‹æ¨¡å‹ |
|----------|------|----------|
| Google Gemini | SDK | gemini-2.0-flash-exp |
| OpenAI | SDK | gpt-4o |
| DeepSeek | OpenAI å…¼å®¹ | deepseek-chat |
| Qwen | OpenAI å…¼å®¹ | qwen-plus |
| Claude | SDK | claude-3-5-sonnet |
| SiliconFlow | OpenAI å…¼å®¹ | DeepSeek-V3 |
| Custom | OpenAI å…¼å®¹ | è‡ªå®šä¹‰ |

### 3ï¸âƒ£ æ™ºèƒ½ä»£ç†å·¥ä½œæµ

```
ç”¨æˆ·éœ€æ±‚ â”€â”€â†’ LLM ç”Ÿæˆ Chisel
              â”‚
              â–¼
         åå°„éªŒè¯ (ç¼–è¯‘+é˜è¿°)
              â”‚
        â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
        â–¼           â–¼
      æˆåŠŸ        å¤±è´¥ â”€â”€â†’ LLM ä¿®å¤ â”€â”€â†’ é‡è¯• (max 3)
        â”‚
        â–¼
   ç”Ÿæˆ Testbench
        â”‚
        â–¼
   Verilator ä»¿çœŸ
        â”‚
        â–¼
   æ³¢å½¢æ¸²æŸ“ + ä¸‹è½½
```

---

## ğŸ“– æ–‡æ¡£

è¯¦ç»†æ–‡æ¡£è¯·æŸ¥çœ‹ [`docs/`](docs/) ç›®å½•ï¼š

- [ç¬¬ä¸€é˜¶æ®µæˆæœæ€»ç»“](docs/ç¬¬ä¸€é˜¶æ®µæˆæœæ€»ç»“.md) - åå°„ç¯å¢ƒæ„å»º
- [ç¬¬äºŒé˜¶æ®µæˆæœæ€»ç»“](docs/ç¬¬äºŒé˜¶æ®µæˆæœæ€»ç»“.md) - SFT æ•°æ®é›†ç”Ÿæˆ
- [ç¬¬ä¸‰é˜¶æ®µæˆæœæ€»ç»“](docs/ç¬¬ä¸‰é˜¶æ®µæˆæœæ€»ç»“.md) - Web æ™ºèƒ½å·¥ä½œå°

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯ |
|------|------|
| ç¡¬ä»¶æè¿°è¯­è¨€ | Chisel 6.0.0 / Scala 2.13.12 |
| æ„å»ºå·¥å…· | Mill |
| ä»¿çœŸå™¨ | Verilator |
| Web æ¡†æ¶ | Streamlit |
| æ³¢å½¢æ¸²æŸ“ | WaveDrom |
| LLM å¾®è°ƒ | LLaMA-Factory |

---

## ğŸ“œ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) å¼€æºã€‚

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

<p align="center">
  <sub>Made with â¤ï¸ for Hardware AI</sub>
</p>
